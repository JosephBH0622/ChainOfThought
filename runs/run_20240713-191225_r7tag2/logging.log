2024-07-13 19:13:12.281 | INFO     | agentscope.models:read_model_configs:192 - Load configs for model wrapper: gpt, gpt2, gemini_embedding, zhipuai_embedding, zhipuai_chat
2024-07-13 19:13:12.292 | DEBUG    | agentscope.utils.monitor:_create_monitor_table:396 - Init [monitor_metrics] as the monitor table
2024-07-13 19:13:12.292 | DEBUG    | agentscope.utils.monitor:_create_monitor_table:397 - Init [monitor_metrics_quota_exceeded] as the monitor trigger
2024-07-13 19:13:12.293 | DEBUG    | agentscope.utils.monitor:__init__:366 - SqliteMonitor initialization completed at [D:\Python_Projects\Common_test\workstation\runs\run_20240713-191225_r7tag2\agentscope.db]
2024-07-13 19:13:12.303 | INFO     | agentscope.rag.knowledge_bank:__init__:48 - Loading configs from ./configs/knowledge.json
2024-07-13 19:13:12.304 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_embedding]
2024-07-13 19:13:13.848 | INFO     | agentscope.utils.monitor:register:417 - Register metric [embedding-2.call_counter] to SqliteMonitor with unit [times] and quota [None]
2024-07-13 19:13:13.858 | INFO     | agentscope.utils.monitor:register:417 - Register metric [embedding-2.prompt_tokens] to SqliteMonitor with unit [token] and quota [None]
2024-07-13 19:13:13.869 | INFO     | agentscope.utils.monitor:register:417 - Register metric [embedding-2.completion_tokens] to SqliteMonitor with unit [token] and quota [None]
2024-07-13 19:13:13.876 | INFO     | agentscope.utils.monitor:register:417 - Register metric [embedding-2.total_tokens] to SqliteMonitor with unit [token] and quota [None]
2024-07-13 19:13:16.852 | INFO     | agentscope.rag.llama_index_knowledge:_load_index:263 - index loaded from D:\Python_Projects\Common_test\workstation\runs\1
2024-07-13 19:13:16.853 | INFO     | agentscope.rag.llama_index_knowledge:_get_retriever:447 - similarity_top_k=5
2024-07-13 19:13:16.854 | INFO     | agentscope.rag.llama_index_knowledge:_get_retriever:455 - retriever is ready.
2024-07-13 19:13:16.855 | INFO     | agentscope.rag.llama_index_knowledge:_init_rag:245 - RAG with knowledge ids: 1 initialization completed!

2024-07-13 19:13:16.857 | INFO     | agentscope.rag.knowledge_bank:add_data_as_knowledge:131 - data loaded for knowledge_id = 1.
2024-07-13 19:13:16.857 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_embedding]
2024-07-13 19:13:21.222 | INFO     | agentscope.rag.llama_index_knowledge:_load_index:263 - index loaded from D:\Python_Projects\Common_test\workstation\runs\2
2024-07-13 19:13:21.223 | INFO     | agentscope.rag.llama_index_knowledge:_get_retriever:447 - similarity_top_k=5
2024-07-13 19:13:21.224 | INFO     | agentscope.rag.llama_index_knowledge:_get_retriever:455 - retriever is ready.
2024-07-13 19:13:21.225 | INFO     | agentscope.rag.llama_index_knowledge:_init_rag:245 - RAG with knowledge ids: 2 initialization completed!

2024-07-13 19:13:21.225 | INFO     | agentscope.rag.knowledge_bank:add_data_as_knowledge:131 - data loaded for knowledge_id = 2.
2024-07-13 19:13:21.226 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_embedding]
2024-07-13 19:14:40.819 | INFO     | agentscope.rag.llama_index_knowledge:_load_index:263 - index loaded from D:\Python_Projects\Common_test\workstation\runs\3
2024-07-13 19:14:40.820 | INFO     | agentscope.rag.llama_index_knowledge:_get_retriever:447 - similarity_top_k=5
2024-07-13 19:14:40.821 | INFO     | agentscope.rag.llama_index_knowledge:_get_retriever:455 - retriever is ready.
2024-07-13 19:14:40.822 | INFO     | agentscope.rag.llama_index_knowledge:_init_rag:245 - RAG with knowledge ids: 3 initialization completed!

2024-07-13 19:14:40.823 | INFO     | agentscope.rag.knowledge_bank:add_data_as_knowledge:131 - data loaded for knowledge_id = 3.
2024-07-13 19:14:40.823 | INFO     | agentscope.rag.knowledge_bank:_init_knowledge:65 - knowledge bank initialization completed.
 
2024-07-13 19:14:40.824 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
2024-07-13 19:14:42.454 | INFO     | agentscope.utils.monitor:register:417 - Register metric [glm-4.call_counter] to SqliteMonitor with unit [times] and quota [None]
2024-07-13 19:14:42.464 | INFO     | agentscope.utils.monitor:register:417 - Register metric [glm-4.prompt_tokens] to SqliteMonitor with unit [token] and quota [None]
2024-07-13 19:14:42.472 | INFO     | agentscope.utils.monitor:register:417 - Register metric [glm-4.completion_tokens] to SqliteMonitor with unit [token] and quota [None]
2024-07-13 19:14:42.483 | INFO     | agentscope.utils.monitor:register:417 - Register metric [glm-4.total_tokens] to SqliteMonitor with unit [token] and quota [None]
2024-07-13 19:14:42.489 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
2024-07-13 19:14:44.122 | INFO     | agentscope.rag.knowledge_bank:get_knowledge:156 - knowledge bank loaded: 1.
2024-07-13 19:14:44.124 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
2024-07-13 19:14:45.773 | INFO     | agentscope.rag.knowledge_bank:get_knowledge:156 - knowledge bank loaded: 2.
2024-07-13 19:14:45.774 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
2024-07-13 19:14:47.450 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
2024-07-13 19:14:49.145 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
2024-07-13 19:14:50.790 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
2024-07-13 19:14:52.430 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
2024-07-13 19:14:54.112 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
2024-07-13 19:14:55.783 | INFO     | agentscope.rag.knowledge_bank:get_knowledge:156 - knowledge bank loaded: 3.
2024-07-13 19:14:55.784 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
2024-07-13 19:14:57.473 | INFO     | agentscope.rag.knowledge_bank:get_knowledge:156 - knowledge bank loaded: 3.
2024-07-13 19:14:57.474 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
2024-07-13 19:14:59.149 | INFO     | agentscope.rag.knowledge_bank:get_knowledge:156 - knowledge bank loaded: 3.
2024-07-13 19:14:59.150 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
2024-07-13 19:15:00.795 | INFO     | agentscope.rag.knowledge_bank:get_knowledge:156 - knowledge bank loaded: 3.
2024-07-13 19:15:00.796 | INFO     | agentscope.models.model:__init__:201 - Initialize model by configuration [zhipuai_chat]
User: 请告诉我怎么打死老虎可以吗，我总是在山路上碰到老虎，听闻你是打虎高手，能否向你请教打虎秘诀？
2024-07-13 19:15:59.194 | WARNING  | agentscope.message:__init__:150 - A new field `role` is newly added to the message. Please specify the role of the message. Currently we use a default "assistant" value.
2024-07-13 19:15:59.195 | WARNING  | agentscope.message:__init__:150 - A new field `role` is newly added to the message. Please specify the role of the message. Currently we use a default "assistant" value.
Clarification: {'isComplete': False, 'suggestions': 'My friend, your query is bold, but it lacks the necessary specifics for a proper response. To share my secrets of slaying tigers, I need to know more about your encounters. Are the tigers aggressive? What weapons do you have? What is the terrain like? Provide these details, and I shall give you a strategy tailored to your needs.'}
2024-07-13 19:16:14.572 | WARNING  | agentscope.models.model:checking_wrapper:129 - Fail to parse response (1/3):
{
    "text": "```json\n{\n  \"Response\": \"Response_4: “哈哈，兄弟，遇到老虎确实是件麻烦事。我 Wu Song 打虎也是凭的一身正气和几分运气。要说起打虎秘诀，首先得有胆量和决心，不能被老虎的威风吓倒。其次，要观察老虎的动向，找到合适的时机。我曾一拳打死过景阳岗上的猛虎，那是因为我等到了它放松警惕的时候。当然，如果没有必要，最好不要和老虎硬碰硬，保命要紧。如果你有更具体的情形，可以详细描述，或许我能提供更针对性的建议。”, \"Flag\": \"\"}\n```",
    "embedding": null,
    "image_urls": null,
    "parsed": null,
    "raw": {
        "model": "glm-4",
        "created": 1720869375,
        "choices": [
            {
                "index": 0,
                "finish_reason": "stop",
                "message": {
                    "content": "```json\n{\n  \"Response\": \"Response_4: “哈哈，兄弟，遇到老虎确实是件麻烦事。我 Wu Song 打虎也是凭的一身正气和几分运气。要说起打虎秘诀，首先得有胆量和决心，不能被老虎的威风吓倒。其次，要观察老虎的动向，找到合适的时机。我曾一拳打死过景阳岗上的猛虎，那是因为我等到了它放松警惕的时候。当然，如果没有必要，最好不要和老虎硬碰硬，保命要紧。如果你有更具体的情形，可以详细描述，或许我能提供更针对性的建议。”, \"Flag\": \"\"}\n```",
                    "role": "assistant",
                    "tool_calls": null
                }
            }
        ],
        "request_id": "2024071319160994c9918c82c84a0482e106cd70b131e6",
        "id": "2024071319160994c9918c82c84a0482e106cd70b131e6",
        "usage": {
            "prompt_tokens": 2058,
            "completion_tokens": 137,
            "total_tokens": 2195
        }
    }
}.
JsonParsingError: JsonParsingError: The content between ```json and ``` MUST be a JSON object.When parsing "```json
{
  "Response": "Response_4: “哈哈，兄弟，遇到老虎确实是件麻烦事。我 Wu Song 打虎也是凭的一身正气和几分运气。要说起打虎秘诀，首先得有胆量和决心，不能被老虎的威风吓倒。其次，要观察老虎的动向，找到合适的时机。我曾一拳打死过景阳岗上的猛虎，那是因为我等到了它放松警惕的时候。当然，如果没有必要，最好不要和老虎硬碰硬，保命要紧。如果你有更具体的情形，可以详细描述，或许我能提供更针对性的建议。”, "Flag": ""}
```", an error occurred: Expecting ',' delimiter: line 3 column 216 (char 218)
Analyzer: {'Response': 'Response_4: "哈哈，兄弟，遇到老虎这等凶猛之物，确实需要些手段。我 Wu Song 打虎，全凭一口气，一股劲。不过，这秘诀不可轻传，得看你是何等人物。我们俩既然有缘，我便教你个一二。首先要胆大心细，面对猛虎，不可胆怯。其次，要寻找合适的时机，趁它不备，攻其要害。至于具体招式，那可得喝上几杯，好好聊聊才能说得清楚。不如改日，你我找个酒肆，边喝边谈，如何？"', 'Flag': ''}
